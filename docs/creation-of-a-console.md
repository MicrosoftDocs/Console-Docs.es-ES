---
title: Creación de una consola
description: El sistema crea una nueva consola cuando inicia un proceso de consola, un proceso en modo de carácter cuyo punto de entrada es la función principal.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: consola, aplicaciones de modo de carácter, aplicaciones de línea de comandos, aplicaciones de terminal, API de consola
MS-HAID:
- '\_win32\_creation\_of\_a\_console'
- base.creation\_of\_a\_console
- consoles.creation\_of\_a\_console
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 84ec2559-cade-447e-8594-5b824d3d3e81
ms.localizationpriority: high
ms.openlocfilehash: bf7993874c4f7c7031dbbcc9ce53a0610157eb75
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/14/2021
ms.locfileid: "100357925"
---
# <a name="creation-of-a-console"></a><span data-ttu-id="ee859-104">Creación de una consola</span><span class="sxs-lookup"><span data-stu-id="ee859-104">Creation of a Console</span></span>

<span data-ttu-id="ee859-105">El sistema crea una nueva consola cuando inicia un *proceso de consola*, un proceso en modo de carácter cuyo punto de entrada es la función **principal**.</span><span class="sxs-lookup"><span data-stu-id="ee859-105">The system creates a new console when it starts a *console process*, a character-mode process whose entry point is the **main** function.</span></span> <span data-ttu-id="ee859-106">Por ejemplo, el sistema crea una nueva consola cuando inicia el procesador de comandos `cmd.exe`.</span><span class="sxs-lookup"><span data-stu-id="ee859-106">For example, the system creates a new console when it starts the command processor `cmd.exe`.</span></span> <span data-ttu-id="ee859-107">Cuando el procesador de comandos inicia un nuevo proceso de consola, el usuario puede especificar si el sistema crea una nueva consola para el nuevo proceso o si hereda la consola del procesador de comandos.</span><span class="sxs-lookup"><span data-stu-id="ee859-107">When the command processor starts a new console process, the user can specify whether the system creates a new console for the new process or whether it inherits the command processor's console.</span></span>

<span data-ttu-id="ee859-108">Un proceso puede crear una consola mediante uno de los siguientes métodos:</span><span class="sxs-lookup"><span data-stu-id="ee859-108">A process can create a console by using one of the following methods:</span></span>

- <span data-ttu-id="ee859-109">Una interfaz gráfica de usuario (GUI) o un proceso de consola puede usar la función [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) con **CREATE\_NEW\_CONSOLE** para crear un proceso de consola con una nueva consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-109">A graphical user interface (GUI) or console process can use the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function with **CREATE\_NEW\_CONSOLE** to create a console process with a new console.</span></span> <span data-ttu-id="ee859-110">(De manera predeterminada, un proceso de consola hereda la consola de su elemento primario y no hay ninguna garantía de que el proceso para el que se ha diseñado reciba la entrada).</span><span class="sxs-lookup"><span data-stu-id="ee859-110">(By default, a console process inherits its parent's console, and there is no guarantee that input is received by the process for which it was intended.)</span></span>
- <span data-ttu-id="ee859-111">Un proceso de consola o de GUI que no está asociado actualmente a una consola puede usar la función [**AllocConsole**](allocconsole.md) para crear una nueva consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-111">A GUI or console process that is not currently attached to a console can use the [**AllocConsole**](allocconsole.md) function to create a new console.</span></span> <span data-ttu-id="ee859-112">(Los procesos de GUI no se asocian a una consola cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="ee859-112">(GUI processes are not attached to a console when they are created.</span></span> <span data-ttu-id="ee859-113">Los procesos de consola no se asocian a una consola de si se crean mediante [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) con **DETACHED\_PROCESS**).</span><span class="sxs-lookup"><span data-stu-id="ee859-113">Console processes are not attached to a console if they are created using [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) with **DETACHED\_PROCESS**.)</span></span>

<span data-ttu-id="ee859-114">Normalmente, un proceso usa [**AllocConsole**](allocconsole.md) para crear una consola cuando se produce un error que requiere interacción con el usuario.</span><span class="sxs-lookup"><span data-stu-id="ee859-114">Typically, a process uses [**AllocConsole**](allocconsole.md) to create a console when an error occurs requiring interaction with the user.</span></span> <span data-ttu-id="ee859-115">Por ejemplo, un proceso de GUI puede crear una consola cuando se produce un error que impide que use su interfaz gráfica normal, o un proceso de consola que no interactúa normalmente con el usuario puede crear una consola para mostrar un error.</span><span class="sxs-lookup"><span data-stu-id="ee859-115">For example, a GUI process can create a console when an error occurs that prevents it from using its normal graphical interface, or a console process that does not normally interact with the user can create a console to display an error.</span></span>

<span data-ttu-id="ee859-116">Un proceso también puede crear una consola mediante la especificación de la marca **CREATE\_NEW\_CONSOLE** en una llamada a [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa).</span><span class="sxs-lookup"><span data-stu-id="ee859-116">A process can also create a console by specifying the **CREATE\_NEW\_CONSOLE** flag in a call to [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa).</span></span> <span data-ttu-id="ee859-117">Este método crea una nueva consola que es accesible para el proceso secundario, pero no para el primario.</span><span class="sxs-lookup"><span data-stu-id="ee859-117">This method creates a new console that is accessible to the child process but not to the parent process.</span></span> <span data-ttu-id="ee859-118">Las consolas independientes permiten que los procesos primarios y secundarios interactúen con el usuario sin conflictos.</span><span class="sxs-lookup"><span data-stu-id="ee859-118">Separate consoles enable both parent and child processes to interact with the user without conflict.</span></span> <span data-ttu-id="ee859-119">Si esta marca no se especifica cuando se crea un proceso de consola, ambos procesos se asocian a la misma consola y no hay ninguna garantía de que el proceso correcto reciba la entrada prevista.</span><span class="sxs-lookup"><span data-stu-id="ee859-119">If this flag is not specified when a console process is created, both processes are attached to the same console, and there is no guarantee that the correct process will receive the input intended for it.</span></span> <span data-ttu-id="ee859-120">Las aplicaciones pueden evitar confusiones mediante la creación de procesos secundarios que no heredan los identificadores del búfer de entrada o mediante la habilitación de un solo proceso secundario cada vez para heredar un identificador del búfer de entrada, a la vez que se impide que el proceso primario lea la entrada de la consola hasta que el secundario haya finalizado.</span><span class="sxs-lookup"><span data-stu-id="ee859-120">Applications can prevent confusion by creating child processes that do not inherit handles of the input buffer, or by enabling only one child process at a time to inherit an input buffer handle while preventing the parent process from reading console input until the child has finished.</span></span>

<span data-ttu-id="ee859-121">La creación de una nueva consola da como resultado una nueva ventana de consola, así como búferes de pantalla de E/S independientes.</span><span class="sxs-lookup"><span data-stu-id="ee859-121">Creating a new console results in a new console window, as well as separate I/O screen buffers.</span></span> <span data-ttu-id="ee859-122">El proceso asociado a la nueva consola usa la función [**GetStdHandle**](getstdhandle.md) para obtener los identificadores de los búferes de entrada y de pantalla de la nueva consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-122">The process associated with the new console uses the [**GetStdHandle**](getstdhandle.md) function to get the handles of the new console's input and screen buffers.</span></span> <span data-ttu-id="ee859-123">Estos identificadores permiten que el proceso tenga acceso a la consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-123">These handles enable the process to access the console.</span></span>

<span data-ttu-id="ee859-124">Cuando un proceso utiliza [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), puede especificar una estructura [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa), cuyos miembros controlan las características de la primera consola nueva (si existe) creada para el proceso secundario.</span><span class="sxs-lookup"><span data-stu-id="ee859-124">When a process uses [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), it can specify a [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) structure, whose members control the characteristics of the first new console (if any) created for the child process.</span></span> <span data-ttu-id="ee859-125">La estructura **STARTUPINFO** especificada en la llamada a **CreateProcess** afecta a una consola creada si se especifica la marca **CREATE\_NEW\_CONSOLE**.</span><span class="sxs-lookup"><span data-stu-id="ee859-125">The **STARTUPINFO** structure specified in the call to **CreateProcess** affects a console created if the **CREATE\_NEW\_CONSOLE** flag is specified.</span></span> <span data-ttu-id="ee859-126">También afecta a una consola creada si el proceso secundario usa posteriormente [**AllocConsole**](allocconsole.md).</span><span class="sxs-lookup"><span data-stu-id="ee859-126">It also affects a console created if the child process subsequently uses [**AllocConsole**](allocconsole.md).</span></span> <span data-ttu-id="ee859-127">Se pueden especificar las siguientes características de la consola:</span><span class="sxs-lookup"><span data-stu-id="ee859-127">The following console characteristics can be specified:</span></span>

- <span data-ttu-id="ee859-128">Tamaño de la ventana de la nueva consola, en celdas de caracteres.</span><span class="sxs-lookup"><span data-stu-id="ee859-128">Size of the new console window, in character cells</span></span>
- <span data-ttu-id="ee859-129">Ubicación de la ventana de la nueva consola, en coordenadas de píxeles de pantalla.</span><span class="sxs-lookup"><span data-stu-id="ee859-129">Location of the new console window, in screen pixel coordinates</span></span>
- <span data-ttu-id="ee859-130">Tamaño del búfer de pantalla de la nueva consola, en celdas de caracteres.</span><span class="sxs-lookup"><span data-stu-id="ee859-130">Size of the new console's screen buffer, in character cells</span></span>
- <span data-ttu-id="ee859-131">Atributos de color de fondo y de texto del búfer de pantalla de la nueva consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-131">Text and background color attributes of the new console's screen buffer</span></span>
- <span data-ttu-id="ee859-132">Nombre para mostrar de la barra de título de la ventana de la nueva consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-132">Display name for the title bar of the new console's window</span></span>

<span data-ttu-id="ee859-133">El sistema utiliza los valores predeterminados si no se especifican los valores de [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa).</span><span class="sxs-lookup"><span data-stu-id="ee859-133">The system uses default values if the [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) values are not specified.</span></span> <span data-ttu-id="ee859-134">Un proceso secundario puede usar la función [**GetStartupInfo**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getstartupinfow) para determinar los valores de su estructura **STARTUPINFO**.</span><span class="sxs-lookup"><span data-stu-id="ee859-134">A child process can use the [**GetStartupInfo**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getstartupinfow) function to determine the values in its **STARTUPINFO** structure.</span></span>

<span data-ttu-id="ee859-135">Un proceso no puede cambiar la ubicación de la ventana de consola en la pantalla, pero las siguientes funciones de la consola están disponibles para establecer o recuperar las demás propiedades especificadas en la estructura [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa).</span><span class="sxs-lookup"><span data-stu-id="ee859-135">A process cannot change the location of its console window on the screen, but the following console functions are available to set or retrieve the other properties specified in the [**STARTUPINFO**](/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa) structure.</span></span>

| <span data-ttu-id="ee859-136">Función</span><span class="sxs-lookup"><span data-stu-id="ee859-136">Function</span></span> | <span data-ttu-id="ee859-137">Descripción</span><span class="sxs-lookup"><span data-stu-id="ee859-137">Description</span></span> |
|-|-|
| [<span data-ttu-id="ee859-138">**GetConsoleScreenBufferInfo**</span><span class="sxs-lookup"><span data-stu-id="ee859-138">**GetConsoleScreenBufferInfo**</span></span>](getconsolescreenbufferinfo.md) | <span data-ttu-id="ee859-139">Recupera el tamaño de la ventana, el tamaño de búfer de pantalla y los atributos de color.</span><span class="sxs-lookup"><span data-stu-id="ee859-139">Retrieves the window size, screen buffer size, and color attributes.</span></span> |
| [<span data-ttu-id="ee859-140">**SetConsoleWindowInfo**</span><span class="sxs-lookup"><span data-stu-id="ee859-140">**SetConsoleWindowInfo**</span></span>](setconsolewindowinfo.md)  | <span data-ttu-id="ee859-141">Cambia el tamaño de la ventana de consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-141">Changes the size of the console window.</span></span>  |
| [<span data-ttu-id="ee859-142">**SetConsoleScreenBufferSize**</span><span class="sxs-lookup"><span data-stu-id="ee859-142">**SetConsoleScreenBufferSize**</span></span>](setconsolescreenbuffersize.md) | <span data-ttu-id="ee859-143">Cambia el tamaño del búfer de tamaño de la consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-143">Changes the size of the console screen buffer.</span></span> |
| [<span data-ttu-id="ee859-144">**SetConsoleTextAttribute**</span><span class="sxs-lookup"><span data-stu-id="ee859-144">**SetConsoleTextAttribute**</span></span>](setconsoletextattribute.md) | <span data-ttu-id="ee859-145">Establece los atributos de color.</span><span class="sxs-lookup"><span data-stu-id="ee859-145">Sets the color attributes.</span></span>  |
| [<span data-ttu-id="ee859-146">**SetConsoleTitle**</span><span class="sxs-lookup"><span data-stu-id="ee859-146">**SetConsoleTitle**</span></span>](setconsoletitle.md)  | <span data-ttu-id="ee859-147">Establece el título de la ventana de consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-147">Sets the console window title.</span></span> |
| [<span data-ttu-id="ee859-148">**GetConsoleTitle**</span><span class="sxs-lookup"><span data-stu-id="ee859-148">**GetConsoleTitle**</span></span>](getconsoletitle.md)  | <span data-ttu-id="ee859-149">Recupera el título de la ventana de consola.</span><span class="sxs-lookup"><span data-stu-id="ee859-149">Retrieves the console window title.</span></span>  |

<span data-ttu-id="ee859-150">Un proceso puede usar la función [**FreeConsole**](freeconsole.md) para desasociarse de una consola heredada o de una consola creada por [**AllocConsole**](allocconsole.md).</span><span class="sxs-lookup"><span data-stu-id="ee859-150">A process can use the [**FreeConsole**](freeconsole.md) function to detach itself from an inherited console or from a console created by [**AllocConsole**](allocconsole.md).</span></span>

<span data-ttu-id="ee859-151">Un proceso puede usar la función [**AttachConsole**](attachconsole.md) para asociarse a otra sesión de consola existente después de usar [**FreeConsole**](freeconsole.md) para desasociarse de su propia sesión (o si, de lo contrario, no hay ninguna sesión asociada).</span><span class="sxs-lookup"><span data-stu-id="ee859-151">A process can use the [**AttachConsole**](attachconsole.md) function to attach itself to another existing console session after using [**FreeConsole**](freeconsole.md) to detach from its own session (or if there is otherwise no attached session).</span></span>