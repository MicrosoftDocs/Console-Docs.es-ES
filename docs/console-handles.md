---
title: Identificadores de consola
description: Un proceso de consola utiliza identificadores para acceder a los búferes de entrada y de pantalla de su consola, incluidas las funciones GetStdHandle, CreateFile o CreateConsoleScreenBuffer.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: consola, aplicaciones de modo de carácter, aplicaciones de línea de comandos, aplicaciones de terminal, API de consola
MS-HAID:
- '\_win32\_console\_handles'
- base.console\_handles
- consoles.console\_handles
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: dc723046-b3e9-418a-b386-79be411e5ac8
ms.localizationpriority: high
ms.openlocfilehash: acc7d65e15451fc2804dc1782644c1ccbaa30e28
ms.sourcegitcommit: 508e93bc83b4bca6ce678f88ab081d66b95d605c
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/04/2020
ms.locfileid: "96420244"
---
# <a name="console-handles"></a><span data-ttu-id="cd85c-104">Identificadores de consola</span><span class="sxs-lookup"><span data-stu-id="cd85c-104">Console Handles</span></span>

<span data-ttu-id="cd85c-105">Un proceso de consola utiliza identificadores para acceder a los búferes de entrada y de pantalla de su consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-105">A console process uses handles to access the input and screen buffers of its console.</span></span> <span data-ttu-id="cd85c-106">Un proceso puede usar la función [**GetStdHandle**](getstdhandle.md), [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) o [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) para abrir uno de estos identificadores.</span><span class="sxs-lookup"><span data-stu-id="cd85c-106">A process can use the [**GetStdHandle**](getstdhandle.md), [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858), or [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function to open one of these handles.</span></span>

<span data-ttu-id="cd85c-107">La función [**GetStdHandle**](getstdhandle.md) proporciona un mecanismo para recuperar los identificadores de entrada estándar (`STDIN`), salida estándar (`STDOUT`) y error estándar (`STDERR`) asociados a un proceso.</span><span class="sxs-lookup"><span data-stu-id="cd85c-107">The [**GetStdHandle**](getstdhandle.md) function provides a mechanism for retrieving the standard input (`STDIN`), standard output (`STDOUT`), and standard error (`STDERR`) handles associated with a process.</span></span> <span data-ttu-id="cd85c-108">Durante la creación de la consola, el sistema crea estos identificadores.</span><span class="sxs-lookup"><span data-stu-id="cd85c-108">During console creation, the system creates these handles.</span></span> <span data-ttu-id="cd85c-109">Inicialmente, `STDIN` es un identificador del búfer de entrada de la consola, y `STDOUT` y `STDERR` son controladores del búfer de pantalla activo de la consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-109">Initially, `STDIN` is a handle to the console's input buffer, and `STDOUT` and `STDERR` are handles of the console's active screen buffer.</span></span> <span data-ttu-id="cd85c-110">Sin embargo, la función [**SetStdHandle**](setstdhandle.md) puede redirigir los identificadores estándar cambiando el identificador asociado por `STDIN`, `STDOUT` o `STDERR`.</span><span class="sxs-lookup"><span data-stu-id="cd85c-110">However, the [**SetStdHandle**](setstdhandle.md) function can redirect the standard handles by changing the handle associated with `STDIN`, `STDOUT`, or `STDERR`.</span></span> <span data-ttu-id="cd85c-111">Dado que todos los procesos secundarios heredan los identificadores estándar del elemento primario, las llamadas subsiguientes a **GetStdHandle** devuelven el identificador redirigido.</span><span class="sxs-lookup"><span data-stu-id="cd85c-111">Because the parent's standard handles are inherited by any child process, subsequent calls to **GetStdHandle** return the redirected handle.</span></span> <span data-ttu-id="cd85c-112">Por tanto, un identificador que devuelva **GetStdHandle** puede hacer referencia a algo distinto de la E/S de la consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-112">A handle returned by **GetStdHandle** may, therefore, refer to something other than console I/O.</span></span> <span data-ttu-id="cd85c-113">Por ejemplo, antes de crear un proceso secundario, un proceso primario puede usar **SetStdHandle** para establecer que un identificador de canalización sea el identificador `STDIN` que hereda el proceso secundario.</span><span class="sxs-lookup"><span data-stu-id="cd85c-113">For example, before creating a child process, a parent process can use **SetStdHandle** to set a pipe handle to be the `STDIN` handle that is inherited by the child process.</span></span> <span data-ttu-id="cd85c-114">Cuando el proceso secundario llama a **GetStdHandle**, obtiene el identificador de canalización.</span><span class="sxs-lookup"><span data-stu-id="cd85c-114">When the child process calls **GetStdHandle**, it gets the pipe handle.</span></span> <span data-ttu-id="cd85c-115">Esto significa que el proceso primario puede controlar los identificadores estándar del proceso secundario.</span><span class="sxs-lookup"><span data-stu-id="cd85c-115">This means that the parent process can control the standard handles of the child process.</span></span> <span data-ttu-id="cd85c-116">Los identificadores que devuelve **GetStdHandle** tienen el acceso `GENERIC_READ | GENERIC_WRITE` a menos que se haya utilizado **SetStdHandle** para reducir el acceso del identificador estándar.</span><span class="sxs-lookup"><span data-stu-id="cd85c-116">The handles returned by **GetStdHandle** have `GENERIC_READ | GENERIC_WRITE` access unless **SetStdHandle** has been used to set the standard handle to have lesser access.</span></span>

<span data-ttu-id="cd85c-117">El valor de los identificadores que devuelve [**GetStdHandle**](getstdhandle.md) no es 0, 1 ni 2, por lo que las constantes de secuencia predefinidas estándar en Stdio.h (`STDIN`, `STDOUT` y `STDERR`) no se pueden usar en funciones que requieren un identificador de consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-117">The value of the handles returned by [**GetStdHandle**](getstdhandle.md) are not 0, 1, and 2, so the standard predefined stream constants in Stdio.h (`STDIN`, `STDOUT`, and `STDERR`) cannot be used in functions that require a console handle.</span></span>

<span data-ttu-id="cd85c-118">La función [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) permite que un proceso obtenga un identificador para el búfer de entrada de la consola y el búfer de pantalla activo, aunque `STDIN` y `STDOUT` se hayan redirigido.</span><span class="sxs-lookup"><span data-stu-id="cd85c-118">The [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) function enables a process to get a handle to its console's input buffer and active screen buffer, even if `STDIN` and `STDOUT` have been redirected.</span></span> <span data-ttu-id="cd85c-119">Para abrir un identificador de un búfer de entrada de la consola, especifique el valor `CONIN$` en una llamada a **CreateFile**.</span><span class="sxs-lookup"><span data-stu-id="cd85c-119">To open a handle to a console's input buffer, specify the `CONIN$` value in a call to **CreateFile**.</span></span> <span data-ttu-id="cd85c-120">Para abrir un identificador en el búfer de pantalla activo de la consola, especifique el valor `CONOUT$` en una llamada a **CreateFile**.</span><span class="sxs-lookup"><span data-stu-id="cd85c-120">Specify the `CONOUT$` value in a call to **CreateFile** to open a handle to a console's active screen buffer.</span></span> <span data-ttu-id="cd85c-121">**CreateFile** le permite especificar el acceso de lectura y escritura del identificador que devuelve.</span><span class="sxs-lookup"><span data-stu-id="cd85c-121">**CreateFile** enables you to specify the read/write access of the handle that it returns.</span></span>

<span data-ttu-id="cd85c-122">La función [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) crea un nuevo búfer de pantalla y devuelve un identificador.</span><span class="sxs-lookup"><span data-stu-id="cd85c-122">The [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function creates a new screen buffer and returns a handle.</span></span> <span data-ttu-id="cd85c-123">Este identificador se puede utilizar en cualquier función que acepte un identificador para la salida de la consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-123">This handle can be used in any function that accepts a handle to console output.</span></span> <span data-ttu-id="cd85c-124">Un búfer de pantalla nuevo no está activo (no se muestra) hasta que su identificador se especifica en una llamada a la función [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md).</span><span class="sxs-lookup"><span data-stu-id="cd85c-124">The new screen buffer is not active (displayed) until its handle is specified in a call to the [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) function.</span></span> <span data-ttu-id="cd85c-125">Tenga en cuenta que el cambio del búfer de pantalla activo no afecta al identificador que devuelve [**GetStdHandle**](getstdhandle.md).</span><span class="sxs-lookup"><span data-stu-id="cd85c-125">Note that changing the active screen buffer does not affect the handle returned by [**GetStdHandle**](getstdhandle.md).</span></span> <span data-ttu-id="cd85c-126">Del mismo modo, el uso de [**SetStdHandle**](setstdhandle.md) para cambiar el identificador `STDOUT` no afecta al búfer de pantalla activo.</span><span class="sxs-lookup"><span data-stu-id="cd85c-126">Similarly, using [**SetStdHandle**](setstdhandle.md) to change the `STDOUT` handle does not affect the active screen buffer.</span></span>

<span data-ttu-id="cd85c-127">Los identificadores de consola que devuelve [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) y [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) se pueden usar en cualquiera de las funciones de la consola que requieran un identificador para un búfer de entrada de la consola o de un búfer de pantalla de la consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-127">Console handles returned by [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) and [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) can be used in any of the console functions that require a handle to a console's input buffer or of a console screen buffer.</span></span> <span data-ttu-id="cd85c-128">Las funciones de la consola pueden usar los identificadores que devuelve [**GetStdHandle**](getstdhandle.md) si no se han redirigido para hacer referencia a algo distinto de la E/S de la consola.</span><span class="sxs-lookup"><span data-stu-id="cd85c-128">Handles returned by [**GetStdHandle**](getstdhandle.md) can be used by the console functions if they have not been redirected to refer to something other than console I/O.</span></span> <span data-ttu-id="cd85c-129">Sin embargo, si se redirigió un identificador estándar para que hiciera referencia a un archivo o a una canalización, el identificador solo podrá usarse en las funciones [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) y [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747).</span><span class="sxs-lookup"><span data-stu-id="cd85c-129">If a standard handle has been redirected to refer to a file or a pipe, however, the handle can only be used by the [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) functions.</span></span> <span data-ttu-id="cd85c-130">[**GetFileType**](https://docs.microsoft.com/windows/win32/api/fileapi/nf-fileapi-getfiletype) puede ayudar a determinar a qué tipo de dispositivo hace referencia el identificador.</span><span class="sxs-lookup"><span data-stu-id="cd85c-130">[**GetFileType**](https://docs.microsoft.com/windows/win32/api/fileapi/nf-fileapi-getfiletype) can assist in determining what device type the handle refers to.</span></span> <span data-ttu-id="cd85c-131">Un identificador de consola se presenta como `FILE_TYPE_CHAR`.</span><span class="sxs-lookup"><span data-stu-id="cd85c-131">A console handle presents as `FILE_TYPE_CHAR`.</span></span>

<span data-ttu-id="cd85c-132">Un proceso puede usar la función [**DuplicateHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) para crear un identificador de consola duplicado que tenga un acceso o una herencia distintos del identificador original.</span><span class="sxs-lookup"><span data-stu-id="cd85c-132">A process can use the [**DuplicateHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) function to create a duplicate console handle that has different access or inheritability from the original handle.</span></span> <span data-ttu-id="cd85c-133">Sin embargo, tenga en cuenta que un proceso solo puede crear un identificador de consola duplicado para su propio uso.</span><span class="sxs-lookup"><span data-stu-id="cd85c-133">Note, however, that a process can create a duplicate console handle only for its own use.</span></span> <span data-ttu-id="cd85c-134">Esto difiere de otros tipos de identificadores (como objetos de archivo, canalización o exclusión mutua), para los que **DuplicateHandle** puede crear un duplicado que sea válido para otro proceso.</span><span class="sxs-lookup"><span data-stu-id="cd85c-134">This differs from other handle types (such as file, pipe, or mutex objects), for which **DuplicateHandle** can create a duplicate that is valid for a different process.</span></span>
<span data-ttu-id="cd85c-135">El acceso a una consola debe compartirse durante la [creación](creation-of-a-console.md) del otro proceso o puede solicitarlo el otro proceso a través del mecanismo [**AttachConsole**](attachconsole.md).</span><span class="sxs-lookup"><span data-stu-id="cd85c-135">Access to a console must be shared during [creation](creation-of-a-console.md) of the other process or may be requested by the other process through the [**AttachConsole**](attachconsole.md) mechanism.</span></span>

<span data-ttu-id="cd85c-136">Para cerrar un identificador de consola, un proceso puede usar la función [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211).</span><span class="sxs-lookup"><span data-stu-id="cd85c-136">To close a console handle, a process can use the [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211) function.</span></span>
