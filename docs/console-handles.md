---
title: Identificadores de consola
description: Un proceso de consola utiliza identificadores para tener acceso a los búferes de entrada y de pantalla de su consola, incluidas las funciones GetStdHandle, CreateFile o CreateConsoleScreenBuffer.
author: miniksa
ms.author: miniksa
ms.topic: article
keywords: consola, aplicaciones de modo de carácter, aplicaciones de línea de comandos, aplicaciones de terminal, API de consola
MS-HAID:
- '\_win32\_console\_handles'
- base.console\_handles
- consoles.console\_handles
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: dc723046-b3e9-418a-b386-79be411e5ac8
ms.openlocfilehash: 50b1ca460818080461116df85bf51387c024df89
ms.sourcegitcommit: b75f4688e080d300b80c552d0711fdd86b9974bf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/24/2020
ms.locfileid: "89060608"
---
# <a name="console-handles"></a><span data-ttu-id="06a51-104">Identificadores de consola</span><span class="sxs-lookup"><span data-stu-id="06a51-104">Console Handles</span></span>


<span data-ttu-id="06a51-105">Un proceso de consola utiliza identificadores para tener acceso a los búferes de entrada y de pantalla de su consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-105">A console process uses handles to access the input and screen buffers of its console.</span></span> <span data-ttu-id="06a51-106">Un proceso puede utilizar la función [**GetStdHandle**](getstdhandle.md), [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858)o [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) para abrir uno de estos identificadores.</span><span class="sxs-lookup"><span data-stu-id="06a51-106">A process can use the [**GetStdHandle**](getstdhandle.md), [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858), or [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function to open one of these handles.</span></span>

<span data-ttu-id="06a51-107">La función [**GetStdHandle**](getstdhandle.md) proporciona un mecanismo para recuperar los identificadores de entrada estándar (stdin), salida estándar (stdout) y error estándar (stderr) asociados a un proceso.</span><span class="sxs-lookup"><span data-stu-id="06a51-107">The [**GetStdHandle**](getstdhandle.md) function provides a mechanism for retrieving the standard input (STDIN), standard output (STDOUT), and standard error (STDERR) handles associated with a process.</span></span> <span data-ttu-id="06a51-108">Durante la creación de la consola, el sistema crea estos identificadores.</span><span class="sxs-lookup"><span data-stu-id="06a51-108">During console creation, the system creates these handles.</span></span> <span data-ttu-id="06a51-109">Inicialmente, STDIN es un identificador del búfer de entrada de la consola, y STDOUT y STDERR son identificadores del búfer de pantalla activo de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-109">Initially, STDIN is a handle to the console's input buffer, and STDOUT and STDERR are handles of the console's active screen buffer.</span></span> <span data-ttu-id="06a51-110">Sin embargo, la función [**SetStdHandle**](setstdhandle.md) puede redirigir los identificadores estándar cambiando el identificador asociado a stdin, stdout o stderr.</span><span class="sxs-lookup"><span data-stu-id="06a51-110">However, the [**SetStdHandle**](setstdhandle.md) function can redirect the standard handles by changing the handle associated with STDIN, STDOUT, or STDERR.</span></span> <span data-ttu-id="06a51-111">Dado que todos los procesos secundarios heredan los identificadores estándar del elemento primario, las llamadas subsiguientes a **GetStdHandle** devuelven el identificador redirigido.</span><span class="sxs-lookup"><span data-stu-id="06a51-111">Because the parent's standard handles are inherited by any child process, subsequent calls to **GetStdHandle** return the redirected handle.</span></span> <span data-ttu-id="06a51-112">Un identificador devuelto por **GetStdHandle** puede, por tanto, hacer referencia a un elemento distinto de e/s de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-112">A handle returned by **GetStdHandle** may, therefore, refer to something other than console I/O.</span></span> <span data-ttu-id="06a51-113">Por ejemplo, antes de crear un proceso secundario, un proceso primario puede usar **SetStdHandle** para establecer un identificador de canalización para que sea el identificador de stdin heredado por el proceso secundario.</span><span class="sxs-lookup"><span data-stu-id="06a51-113">For example, before creating a child process, a parent process can use **SetStdHandle** to set a pipe handle to be the STDIN handle that is inherited by the child process.</span></span> <span data-ttu-id="06a51-114">Cuando el proceso secundario llama a **GetStdHandle**, obtiene el identificador de canalización.</span><span class="sxs-lookup"><span data-stu-id="06a51-114">When the child process calls **GetStdHandle**, it gets the pipe handle.</span></span> <span data-ttu-id="06a51-115">Esto significa que el proceso primario puede controlar los identificadores estándar del proceso secundario.</span><span class="sxs-lookup"><span data-stu-id="06a51-115">This means that the parent process can control the standard handles of the child process.</span></span> <span data-ttu-id="06a51-116">Los identificadores devueltos por **GetStdHandle** tienen una \_ lectura genérica | \_Acceso de escritura genérico, a menos que se haya usado **SetStdHandle** para establecer el identificador estándar para tener un acceso inferior.</span><span class="sxs-lookup"><span data-stu-id="06a51-116">The handles returned by **GetStdHandle** have GENERIC\_READ | GENERIC\_WRITE access unless **SetStdHandle** has been used to set the standard handle to have lesser access.</span></span>

<span data-ttu-id="06a51-117">El valor de los identificadores devueltos por [**GetStdHandle**](getstdhandle.md) no es 0, 1 y 2, por lo que las constantes de secuencia predefinidas estándar en stdio. h (stdin, stdout y stderr) no se pueden usar en funciones que requieren un identificador de consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-117">The value of the handles returned by [**GetStdHandle**](getstdhandle.md) are not 0, 1, and 2, so the standard predefined stream constants in Stdio.h (STDIN, STDOUT, and STDERR) cannot be used in functions that require a console handle.</span></span>

<span data-ttu-id="06a51-118">La función [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) permite a un proceso obtener un identificador para el búfer de entrada de la consola y el búfer de pantalla activo, aunque se hayan Redirigido stdin y stdout.</span><span class="sxs-lookup"><span data-stu-id="06a51-118">The [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) function enables a process to get a handle to its console's input buffer and active screen buffer, even if STDIN and STDOUT have been redirected.</span></span> <span data-ttu-id="06a51-119">Para abrir un identificador de un búfer de entrada de la consola, especifique el valor de CONIN $ en una llamada a **CreateFile**.</span><span class="sxs-lookup"><span data-stu-id="06a51-119">To open a handle to a console's input buffer, specify the CONIN$ value in a call to **CreateFile**.</span></span> <span data-ttu-id="06a51-120">Especifique el valor de CONOUT $ en una llamada a **CreateFile** para abrir un identificador del búfer de pantalla activo de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-120">Specify the CONOUT$ value in a call to **CreateFile** to open a handle to a console's active screen buffer.</span></span> <span data-ttu-id="06a51-121">**CreateFile** le permite especificar el acceso de lectura y escritura del identificador que devuelve.</span><span class="sxs-lookup"><span data-stu-id="06a51-121">**CreateFile** enables you to specify the read/write access of the handle that it returns.</span></span>

<span data-ttu-id="06a51-122">La función [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) crea un nuevo búfer de pantalla y devuelve un identificador.</span><span class="sxs-lookup"><span data-stu-id="06a51-122">The [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function creates a new screen buffer and returns a handle.</span></span> <span data-ttu-id="06a51-123">Este identificador se puede utilizar en cualquier función que acepte un identificador para la salida de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-123">This handle can be used in any function that accepts a handle to console output.</span></span> <span data-ttu-id="06a51-124">El nuevo búfer de pantalla no está activo hasta que su identificador se especifica en una llamada a la función [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) .</span><span class="sxs-lookup"><span data-stu-id="06a51-124">The new screen buffer is not active until its handle is specified in a call to the [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) function.</span></span> <span data-ttu-id="06a51-125">Tenga en cuenta que el cambio del búfer de pantalla activo no afecta al identificador devuelto por [**GetStdHandle**](getstdhandle.md).</span><span class="sxs-lookup"><span data-stu-id="06a51-125">Note that changing the active screen buffer does not affect the handle returned by [**GetStdHandle**](getstdhandle.md).</span></span> <span data-ttu-id="06a51-126">Del mismo modo, el uso de [**SetStdHandle**](setstdhandle.md) para cambiar el identificador de stdout no afecta al búfer de pantalla activo.</span><span class="sxs-lookup"><span data-stu-id="06a51-126">Similarly, using [**SetStdHandle**](setstdhandle.md) to change the STDOUT handle does not affect the active screen buffer.</span></span>

<span data-ttu-id="06a51-127">Los identificadores de consola devueltos por [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) y [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) se pueden usar en cualquiera de las funciones de consola que requieren un identificador para el búfer de entrada de una consola o un búfer de pantalla de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-127">Console handles returned by [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) and [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) can be used in any of the console functions that require a handle to a console's input buffer or of a console screen buffer.</span></span> <span data-ttu-id="06a51-128">Las funciones de la consola pueden usar los identificadores devueltos por [**GetStdHandle**](getstdhandle.md) si no se han redirigido para hacer referencia a un elemento distinto de e/s de la consola.</span><span class="sxs-lookup"><span data-stu-id="06a51-128">Handles returned by [**GetStdHandle**](getstdhandle.md) can be used by the console functions if they have not been redirected to refer to something other than console I/O.</span></span> <span data-ttu-id="06a51-129">Sin embargo, si se redirigió un identificador estándar para hacer referencia a un archivo o una canalización, el identificador solo lo pueden usar las funciones [**readfile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) y [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) .</span><span class="sxs-lookup"><span data-stu-id="06a51-129">If a standard handle has been redirected to refer to a file or a pipe, however, the handle can only be used by the [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) functions.</span></span>

<span data-ttu-id="06a51-130">Un proceso puede usar la función [**DuplicateHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) para crear un controlador de consola duplicado que tenga un acceso o una herencia diferentes del identificador original.</span><span class="sxs-lookup"><span data-stu-id="06a51-130">A process can use the [**DuplicateHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724251) function to create a duplicate console handle that has different access or inheritability from the original handle.</span></span> <span data-ttu-id="06a51-131">Sin embargo, tenga en cuenta que un proceso puede crear un identificador de consola duplicado solo para su propio uso.</span><span class="sxs-lookup"><span data-stu-id="06a51-131">Note, however, that a process can create a duplicate console handle only for its own use.</span></span> <span data-ttu-id="06a51-132">Esto difiere de otros tipos de identificadores (como objetos de archivo, canalización o exclusión mutua), para los que **DuplicateHandle** puede crear un duplicado que sea válido para un proceso diferente.</span><span class="sxs-lookup"><span data-stu-id="06a51-132">This differs from other handle types (such as file, pipe, or mutex objects), for which **DuplicateHandle** can create a duplicate that is valid for a different process.</span></span>

<span data-ttu-id="06a51-133">Para cerrar un identificador de consola, un proceso puede utilizar la función [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211) .</span><span class="sxs-lookup"><span data-stu-id="06a51-133">To close a console handle, a process can use the [**CloseHandle**](https://msdn.microsoft.com/library/windows/desktop/ms724211) function.</span></span>

 

 




