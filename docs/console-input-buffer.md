---
title: Búfer de entrada de la consola
description: Cada consola tiene un búfer de entrada que contiene una cola de registros de eventos de entrada.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: consola, aplicaciones de modo de carácter, aplicaciones de línea de comandos, aplicaciones de terminal, API de consola
MS-HAID:
- '\_win32\_console\_input\_buffer'
- base.console\_input\_buffer
- consoles.console\_input\_buffer
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 6e536658-8a27-478e-82ee-d1e11f351301
ms.openlocfilehash: d5d3604d3d4f2738af01ae1bc051c10af6249c62
ms.sourcegitcommit: 281eb1469f77ae4fb4c67806898e14eac440522a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/14/2021
ms.locfileid: "100358116"
---
# <a name="console-input-buffer"></a><span data-ttu-id="6523e-104">Búfer de entrada de la consola</span><span class="sxs-lookup"><span data-stu-id="6523e-104">Console Input Buffer</span></span>

<span data-ttu-id="6523e-105">Cada consola tiene un búfer de entrada que contiene una cola de registros de eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="6523e-105">Each console has an input buffer that contains a queue of input event records.</span></span> <span data-ttu-id="6523e-106">Cuando la ventana de la consola tiene el foco de teclado, una consola da formato a cada evento de entrada (por ejemplo, una sola pulsación de tecla, un movimiento del mouse o un clic del botón del mouse) como un registro de entrada que coloca en el búfer de entrada de la consola.</span><span class="sxs-lookup"><span data-stu-id="6523e-106">When a console's window has the keyboard focus, a console formats each input event (such as a single keystroke, a movement of the mouse, or a mouse-button click) as an input record that it places in the console's input buffer.</span></span>

<span data-ttu-id="6523e-107">Las aplicaciones pueden acceder indirectamente a un búfer de entrada de la consola mediante las [funciones de e/s de la consola de alto nivel](high-level-console-input-and-output-functions.md), o directamente mediante las funciones de entrada de la [consola de bajo nivel](low-level-console-input-functions.md).</span><span class="sxs-lookup"><span data-stu-id="6523e-107">Applications can access a console's input buffer indirectly by using the [high-level console I/O functions](high-level-console-input-and-output-functions.md), or directly by using the [low-level console input functions](low-level-console-input-functions.md).</span></span> <span data-ttu-id="6523e-108">Las funciones de entrada de alto nivel filtran y procesan los datos en el búfer de entrada, devolviendo solo una secuencia de caracteres de entrada.</span><span class="sxs-lookup"><span data-stu-id="6523e-108">The high-level input functions filter and process the data in the input buffer, returning only a stream of input characters.</span></span> <span data-ttu-id="6523e-109">Las funciones de entrada de nivel inferior permiten a las aplicaciones leer registros de entrada directamente desde el búfer de entrada de una consola o colocar registros de entrada en el búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="6523e-109">The low-level input functions enable applications to read input records directly from a console's input buffer, or to place input records into the input buffer.</span></span> <span data-ttu-id="6523e-110">Para abrir un identificador de un búfer de entrada de la consola, especifique el valor de **CONIN $** en una llamada a la función [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="6523e-110">To open a handle to a console's input buffer, specify the **CONIN$** value in a call to the [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) function.</span></span>

<span data-ttu-id="6523e-111">Un registro de entrada es una estructura que contiene información sobre el tipo de evento que se ha producido (teclado, Mouse, cambio de tamaño de ventana, foco o evento de menú), así como detalles específicos sobre el evento.</span><span class="sxs-lookup"><span data-stu-id="6523e-111">An input record is a structure containing information about the type of event that occurred (keyboard, mouse, window resizing, focus, or menu event) as well as specific details about the event.</span></span> <span data-ttu-id="6523e-112">El miembro **EventType** en una estructura de [**\_ registro de entrada**](input-record-str.md) indica qué tipo de evento se incluye en el registro.</span><span class="sxs-lookup"><span data-stu-id="6523e-112">The **EventType** member in an [**INPUT\_RECORD**](input-record-str.md) structure indicates which type of event is contained in the record.</span></span>

<span data-ttu-id="6523e-113">Los eventos de foco y de menú se colocan en el búfer de entrada de la consola para uso interno del sistema y las aplicaciones deben omitirlos.</span><span class="sxs-lookup"><span data-stu-id="6523e-113">Focus and menu events are placed in a console's input buffer for internal use by the system and should be ignored by applications.</span></span>

## <a name="keyboard-events"></a><span data-ttu-id="6523e-114">Eventos de teclado</span><span class="sxs-lookup"><span data-stu-id="6523e-114">Keyboard Events</span></span>

<span data-ttu-id="6523e-115">Los eventos de teclado se generan cuando se presiona o se suelta una tecla. Esto incluye las teclas de control.</span><span class="sxs-lookup"><span data-stu-id="6523e-115">Keyboard events are generated when any key is pressed or released; this includes control keys.</span></span> <span data-ttu-id="6523e-116">Sin embargo, la tecla ALT tiene un significado especial para el sistema cuando se presiona y se suelta sin combinarse con otro carácter y no se pasa a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6523e-116">However, the ALT key has special meaning to the system when pressed and released without being combined with another character, and it is not passed through to the application.</span></span> <span data-ttu-id="6523e-117">Además, la combinación de teclas CTRL + C no se pasa si el identificador de entrada está en modo procesado.</span><span class="sxs-lookup"><span data-stu-id="6523e-117">Also, the CTRL+C key combination is not passed through if the input handle is in processed mode.</span></span>

<span data-ttu-id="6523e-118">Si el evento de entrada es una pulsación de tecla, el miembro de **evento** del [**\_ registro de entrada**](input-record-str.md) es una estructura de [**\_ \_ registro de eventos clave**](key-event-record-str.md) que contiene la información siguiente:</span><span class="sxs-lookup"><span data-stu-id="6523e-118">If the input event is a keystroke, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**KEY\_EVENT\_RECORD**](key-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="6523e-119">Valor booleano que indica si se presionó o se liberó la tecla.</span><span class="sxs-lookup"><span data-stu-id="6523e-119">A Boolean value indicating whether the key was pressed or released.</span></span>
- <span data-ttu-id="6523e-120">Un recuento de repetición que puede ser mayor que uno cuando se mantiene presionada una tecla.</span><span class="sxs-lookup"><span data-stu-id="6523e-120">A repeat count that can be greater than one when a key is held down.</span></span>
- <span data-ttu-id="6523e-121">El código de la clave virtual, que identifica la clave especificada de forma independiente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6523e-121">The virtual-key code, identifying the given key in a device-independent manner.</span></span>
- <span data-ttu-id="6523e-122">Código de análisis virtual, que indica el valor dependiente del dispositivo generado por el hardware del teclado.</span><span class="sxs-lookup"><span data-stu-id="6523e-122">The virtual-scan code, indicating the device-dependent value generated by the keyboard hardware.</span></span>
- <span data-ttu-id="6523e-123">™ Unicode traducido o carácter ANSI.</span><span class="sxs-lookup"><span data-stu-id="6523e-123">The translated Unicode™ or ANSI character.</span></span>
- <span data-ttu-id="6523e-124">Una variable de marca que indica el estado de las teclas de control (las teclas ALT, CTRL, Mayús, BLOQ NUM, Bloq Despl y Bloq Mayús) e indica si se presionó una tecla mejorada.</span><span class="sxs-lookup"><span data-stu-id="6523e-124">A flag variable indicating the state of the control keys (the ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK keys) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="6523e-125">Las claves mejoradas para los teclados de IBM® 101-Key y 102-Key son las teclas INS, SUPR, Inicio, fin, Re Pág, Av Pág y flecha en los clústeres a la izquierda del teclado numérico y la división (/) y escriba las teclas en el teclado numérico.</span><span class="sxs-lookup"><span data-stu-id="6523e-125">Enhanced keys for the IBM® 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>

## <a name="mouse-events"></a><span data-ttu-id="6523e-126">Eventos del mouse</span><span class="sxs-lookup"><span data-stu-id="6523e-126">Mouse Events</span></span>

<span data-ttu-id="6523e-127">Los eventos del mouse se generan cada vez que el usuario mueve el mouse o presiona o suelta uno de los botones del mouse.</span><span class="sxs-lookup"><span data-stu-id="6523e-127">Mouse events are generated whenever the user moves the mouse or presses or releases one of the mouse buttons.</span></span> <span data-ttu-id="6523e-128">Los eventos del mouse se colocan en el búfer de entrada solo si se cumplen las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="6523e-128">Mouse events are placed in the input buffer only if the following conditions are met:</span></span>

- <span data-ttu-id="6523e-129">El modo de entrada de la consola se establece para **Habilitar la \_ \_ entrada del mouse** (el modo predeterminado).</span><span class="sxs-lookup"><span data-stu-id="6523e-129">The console input mode is set to **ENABLE\_MOUSE\_INPUT** (the default mode).</span></span>
- <span data-ttu-id="6523e-130">La ventana de la consola tiene el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="6523e-130">The console window has the keyboard focus.</span></span>
- <span data-ttu-id="6523e-131">El puntero del mouse está dentro de los bordes de la ventana de la consola.</span><span class="sxs-lookup"><span data-stu-id="6523e-131">The mouse pointer is within the borders of the console's window.</span></span>

<span data-ttu-id="6523e-132">Si el evento de entrada es un evento del mouse, el miembro del **evento** en el [**\_ registro de entrada**](input-record-str.md) es una estructura de [**\_ \_ registro de eventos del mouse**](mouse-event-record-str.md) que contiene la información siguiente:</span><span class="sxs-lookup"><span data-stu-id="6523e-132">If the input event is a mouse event, the **Event** member in [**INPUT\_RECORD**](input-record-str.md) is a [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure containing the following information:</span></span>

- <span data-ttu-id="6523e-133">Coordenadas del puntero del mouse en términos de la fila y columna de la celda de caracteres en el sistema de coordenadas del búfer de pantalla de la consola.</span><span class="sxs-lookup"><span data-stu-id="6523e-133">The coordinates of the mouse pointer in terms of the character-cell row and column in the console screen buffer's coordinate system.</span></span>
- <span data-ttu-id="6523e-134">Una variable de marca que indica el estado de los botones del mouse.</span><span class="sxs-lookup"><span data-stu-id="6523e-134">A flag variable indicating the state of the mouse buttons.</span></span>
- <span data-ttu-id="6523e-135">Una variable de marca que indica el estado de las teclas de control (ALT, CTRL, Mayús, BLOQ NUM, Bloq Despl y Bloq Mayús) e indica si se presionó una tecla mejorada.</span><span class="sxs-lookup"><span data-stu-id="6523e-135">A flag variable indicating the state of the control keys (ALT, CTRL, SHIFT, NUM LOCK, SCROLL LOCK, and CAPS LOCK) and indicating whether an enhanced key was pressed.</span></span> <span data-ttu-id="6523e-136">Las claves mejoradas para los teclados IBM 101-Key y 102-Key son las teclas INS, SUPR, Inicio, fin, Re Pág, Av Pág y flecha en los clústeres a la izquierda del teclado numérico y la división (/) y escriba las teclas en el teclado numérico.</span><span class="sxs-lookup"><span data-stu-id="6523e-136">Enhanced keys for the IBM 101-key and 102-key keyboards are the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad and the divide (/) and ENTER keys in the numeric keypad.</span></span>
- <span data-ttu-id="6523e-137">Una variable de marca que indica si el evento era un evento normal de presionar un botón o un botón de liberación, un evento de movimiento del mouse o el segundo clic de un evento de doble clic.</span><span class="sxs-lookup"><span data-stu-id="6523e-137">A flag variable indicating whether the event was a normal button-press or button-release event, a mouse movement event, or the second click of a double-click event.</span></span>

> [!NOTE]
><span data-ttu-id="6523e-138">Las coordenadas de la posición del mouse están en términos del búfer de pantalla de la consola, no de la ventana de la consola.</span><span class="sxs-lookup"><span data-stu-id="6523e-138">The mouse position coordinates are in terms of the console screen buffer, not the console window.</span></span> <span data-ttu-id="6523e-139">El búfer de pantalla puede haberse desplazado con respecto a la ventana, por lo que la esquina superior izquierda de la ventana no es necesariamente la coordenada (0,0) del búfer de pantalla de la consola.</span><span class="sxs-lookup"><span data-stu-id="6523e-139">The screen buffer may have been scrolled with respect to the window, so the upper left corner of the window is not necessarily the (0,0) coordinate of the console screen buffer.</span></span> <span data-ttu-id="6523e-140">Para determinar las coordenadas del mouse en relación con el sistema de coordenadas de la ventana, reste las coordenadas de origen de la ventana de las coordenadas de posición del mouse.</span><span class="sxs-lookup"><span data-stu-id="6523e-140">To determine the coordinates of the mouse relative to the coordinate system of the window, subtract the window origin coordinates from the mouse position coordinates.</span></span> <span data-ttu-id="6523e-141">Utilice la función [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) para determinar las coordenadas de origen de la ventana.</span><span class="sxs-lookup"><span data-stu-id="6523e-141">Use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the window origin coordinates.</span></span>

<span data-ttu-id="6523e-142">El miembro **dwButtonState** de la estructura del [**\_ \_ registro de eventos del mouse**](mouse-event-record-str.md) tiene un bit que corresponde a cada botón del mouse.</span><span class="sxs-lookup"><span data-stu-id="6523e-142">The **dwButtonState** member of the [**MOUSE\_EVENT\_RECORD**](mouse-event-record-str.md) structure has a bit corresponding to each mouse button.</span></span> <span data-ttu-id="6523e-143">El bit es 1 si el botón está presionado y 0 si el botón está activo.</span><span class="sxs-lookup"><span data-stu-id="6523e-143">The bit is 1 if the button is down and 0 if the button is up.</span></span> <span data-ttu-id="6523e-144">Un evento de versión de botón se detecta mediante un valor 0 para el miembro **dwEventFlags** del **\_ \_ registro de eventos del mouse** y un cambio en el bit de un botón de 1 a 0.</span><span class="sxs-lookup"><span data-stu-id="6523e-144">A button-release event is detected by a 0 value for the **dwEventFlags** member of **MOUSE\_EVENT\_RECORD** and a change in a button's bit from 1 to 0.</span></span> <span data-ttu-id="6523e-145">La función [**GetNumberOfConsoleMouseButtons**](getnumberofconsolemousebuttons.md) recupera el número de botones del mouse.</span><span class="sxs-lookup"><span data-stu-id="6523e-145">The [**GetNumberOfConsoleMouseButtons**](getnumberofconsolemousebuttons.md) function retrieves the number of buttons on the mouse.</span></span>

## <a name="buffer-resizing-events"></a><span data-ttu-id="6523e-146">Eventos de Buffer-Resizing</span><span class="sxs-lookup"><span data-stu-id="6523e-146">Buffer-Resizing Events</span></span>

<span data-ttu-id="6523e-147">El menú de la ventana de la consola permite al usuario cambiar el tamaño del búfer de pantalla activo. Este cambio genera un evento de cambio de tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="6523e-147">A console window's menu enables the user to change the size of the active screen buffer; this change generates a buffer-resizing event.</span></span> <span data-ttu-id="6523e-148">Los eventos de cambio de tamaño de búfer se colocan en el búfer de entrada si el modo de entrada de la consola está establecido para **Habilitar la \_ \_ entrada de ventana** (es decir, el modo predeterminado está deshabilitado).</span><span class="sxs-lookup"><span data-stu-id="6523e-148">Buffer-resizing events are placed in the input buffer if the console's input mode is set to **ENABLE\_WINDOW\_INPUT** (that is, the default mode is disabled).</span></span>

<span data-ttu-id="6523e-149">Si el evento de entrada es un evento de cambio de tamaño de búfer, el miembro de **evento** del [**\_ registro de entrada**](input-record-str.md) es una estructura de [**\_ \_ \_ registro de tamaño de búfer de ventana**](window-buffer-size-record-str.md) que contiene el nuevo tamaño del búfer de pantalla de la consola, expresado en columnas y filas de celda de caracteres.</span><span class="sxs-lookup"><span data-stu-id="6523e-149">If the input event is a buffer-resizing event, the **Event** member of [**INPUT\_RECORD**](input-record-str.md) is a [**WINDOW\_BUFFER\_SIZE\_RECORD**](window-buffer-size-record-str.md) structure containing the new size of the console screen buffer, expressed in character-cell columns and rows.</span></span>

<span data-ttu-id="6523e-150">Si el usuario reduce el tamaño del búfer de pantalla de la consola, se perderán todos los datos de la parte descartada del búfer.</span><span class="sxs-lookup"><span data-stu-id="6523e-150">If the user reduces the size of the console screen buffer, any data in the discarded portion of the buffer is lost.</span></span>

<span data-ttu-id="6523e-151">Los cambios en el tamaño del búfer de la pantalla de la consola como resultado de las llamadas a la función [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) no se generan como eventos de cambio de tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="6523e-151">Changes to the console screen buffer size as a result of application calls to the [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) function are not generated as buffer-resizing events.</span></span>